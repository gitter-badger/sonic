!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Sonic=e()}}(function(){return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!s&&a)return a(o,!0);if(u)return u(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./observable"),u=e("./mutable_list"),o=function(e){function t(t){var n=this;void 0===t&&(t=[]),e.call(this),this.has=function(e){return null!=e&&e>-1&&e<n._array.length},this.get=function(e){return n.has(e)?n._array[e]:void 0},this.prev=function(e){return null==e&&n._array.length?n._array.length-1:n._array.length>0&&null!=e&&n.has(e)&&n.has(e-1)?e-1:null},this.next=function(e){return null==e&&n._array.length?0:n._array.length>0&&null!=e&&n.has(e)&&n.has(e+1)?e+1:null},this.set=function(e,t){return n.has(e)?(n._array[e]=t,e):null},this.splice=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(null==e)e=-1;else if(!n.has(e))return;if(null==t)t=n._array.length;else if(!n.has(t))return;(u=n._array).splice.apply(u,[e+1,t-(e+1)].concat(r)),n._invalidate(e,null);var u},this.observe=function(e){return n._subject.observe(e)},this._invalidate=function(e,t){n.has(e)||(e=null),n.has(t)||(t=null),n._subject.notify(function(n){n.onInvalidate(e,t)})},this._subject=new i.Subject,this._array=t}return r(t,e),t}(u.MutableList);n["default"]=o},{"./mutable_list":9,"./observable":10}],2:[function(e,t,n){var r=function(){function e(e){var t=this;this.has=function(e){return e in t._byKey||t._list.has(e)},this.get=function(e){return e in t._byKey?t._byKey[e]:t._list.has(e)?t._byKey[e]=t._list.get(e):void 0},this.prev=function(e){if(e in t._prev)return t._prev[e];var n=t._list.prev(e);return null==n&&(n=null),t._prev[e]=n,t._next[n]=e,n},this.next=function(e){if(void 0===e&&(e=null),e in t._next)return t._next[e];var n=t._list.next(e);return null==n&&(n=null),t._next[e]=n,t._prev[n]=e,n},this._byKey=Object.create(null),this._next=Object.create(null),this._prev=Object.create(null),this._list=e}return e}();n.Cache=r,n["default"]=r},{}],3:[function(e,t,n){function r(e){return o.MutableList.isMutableList(e)?o.MutableList.create(e):u.ObservableList.isObservableList(e)?u.ObservableList.create(e):i.List.isList(e)?i.List.create(e):Array.isArray(e)?new a["default"](e):s["default"].create(e)}var i=e("./list"),u=e("./observable_list"),o=e("./mutable_list"),s=e("./unit"),a=e("./array_list");n["default"]=r},{"./array_list":1,"./list":8,"./mutable_list":9,"./observable_list":14,"./unit":16}],4:[function(e,t,n){var r=function(){function e(e){var t=this;this.has=function(e){if(e>=0&&e<t._byIndex.length)return!0;for(var n,r=t._byIndex.length-1;r!=e;){if(n=t._list.next(t._byIndex[r]),null==n)return!1;t._byIndex[++r]=n}return!0},this.get=function(e){return t.has(e)?t._list.get(t._byIndex[e]):void 0},this.prev=function(e){return t.has(e-1)?e-1:null==e&&t._byIndex.length?t._byIndex.length-1:null},this.next=function(e){return void 0===e&&(e=-1),t.has(e+1)?e+1:null},this._byIndex=[],this._list=e}return e}();n.Index=r,n["default"]=r},{}],5:[function(e,t,n){var r;!function(e){function t(e){return e.toString()}function n(){return r++}var r=0;e.key=t,e.create=n}(r||(r={})),n["default"]=r},{}],6:[function(e,t,n){var r=function(){function e(e,t){var n=this;this.has=function(e){if(e in n._sourceKeyByKey)return!0;for(var t=null;null!=(t=n.next(t));)if(t==e)return!0;return!1},this.get=function(e){return n.has(e)?n._list.get(n._sourceKeyByKey[e]):void 0},this.prev=function(e){return n.has(e)||null==e?n._keyBySourceKey[n._list.prev(n._sourceKeyByKey[e])]:void 0},this.next=function(e){void 0===e&&(e=null);var t,r;t=e in n._sourceKeyByKey?n._sourceKeyByKey[e]:null;for(;null!=e&&!(e in n._sourceKeyByKey);)if(t=n._list.next(t),!(t in n._keyBySourceKey)){if(null==t)return null;if(r=n._keyFn(n._list.get(t),t),n._keyBySourceKey[t]=r,n._sourceKeyByKey[r]=t,r==e)break}return t=n._list.next(t),null==t?null:(r=n._keyFn(n._list.get(t),t),n._keyBySourceKey[t]=r,n._sourceKeyByKey[r]=t,r)},this._list=e,this._keyFn=t,this._sourceKeyByKey=Object.create(null),this._keyBySourceKey=Object.create(null)}return e}();n.KeyBy=r,n["default"]=r},{}],7:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./key"),u=e("./observable"),o=e("./mutable_list"),s=function(e){function t(t,n){var r=this;e.call(this),this._keyFn=i["default"].create,this.has=function(e){return e in r._byKey},this.get=function(e){return r._byKey[e]},this.prev=function(e){void 0===e&&(e=null);var t=r._prev[e];return null==t?null:t},this.next=function(e){void 0===e&&(e=null);var t=r._next[e];return null==t?null:t},this.set=function(e,t){return r.has(e)?(r._byKey[e]=t,r._invalidate(r._prev[e],r._next[e]),e):null},this.splice=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var u,o;for(u=e;null!=(u=r._next[u])&&(delete r._next[r._prev[u]],delete r._prev[u],u!=t);)delete r._byKey[u];for(u=t;null!=(u=r._prev[u])&&(delete r._prev[r._next[u]],delete r._next[u],u!=e);)delete r._byKey[u];for(var s=e,a=0;a<n.length;a++)o=n[a],u=r._keyFn(o),r._byKey[u]=o,r._prev[u]=s,r._next[s]=u,s=u;r._prev[t]=s,r._next[s]=t,r._invalidate(e,t)},this.observe=function(e){return r._subject.observe(e)},this._invalidate=function(e,t){r.has(e)||(e=null),r.has(t)||(t=null),r._subject.notify(function(n){n.onInvalidate(e,t)})},n&&(this._keyFn=n),this._subject=new u.Subject,this._byKey=Object.create(null),this._prev=Object.create(null),this._next=Object.create(null),this._prev[null]=null,this._next[null]=null,this.splice.apply(this,[null,null].concat(t))}return r(t,e),t}(o.MutableList);n["default"]=s},{"./key":5,"./mutable_list":9,"./observable":10}],8:[function(e,t,n){var r=e("./tree"),i=e("./cache"),u=e("./index"),o=e("./key_by"),s=function(){function e(t){var n=this;this.has=function(e){throw new Error("Not implemented")},this.get=function(e){throw new Error("Not implemented")},this.prev=function(e){throw new Error("Not implemented")},this.next=function(e){throw new Error("Not implemented")},this.first=function(){return e.first(n)},this.last=function(){return e.last(n)},this.forEach=function(t){return e.forEach(n,t)},this.reduce=function(t,r){return e.reduce(n,t)},this.toArray=function(){return e.toArray(n)},this.findKey=function(t){return e.findKey(n,t)},this.find=function(t){return e.find(n,t)},this.keyOf=function(t){return e.keyOf(n,t)},this.indexOf=function(t){return e.indexOf(n,t)},this.keyAt=function(t){return e.keyAt(n,t)},this.at=function(t){return e.at(n,t)},this.every=function(t){return e.every(n,t)},this.some=function(t){return e.some(n,t)},this.contains=function(t){return e.contains(n,t)},this.reverse=function(){return e.create(e.reverse(n))},this.map=function(t){return e.create(e.map(n,t))},this.filter=function(t){return e.create(e.filter(n,t))},this.flatten=function(){return e.create(e.flatten(n))},this.flatMap=function(t){return e.create(e.flatMap(n,t))},this.cache=function(){return e.create(e.cache(n))},this.index=function(){return e.create(e.index(n))},this.keyBy=function(t){return e.create(e.keyBy(n,t))},this.zip=function(t,r){return e.create(e.zip(n,t,r))},this.skip=function(t){return e.create(e.skip(n,t))},this.take=function(t){return e.create(e.take(n,t))},this.range=function(t,r){return e.create(e.range(n,t,r))},this.scan=function(t,r){return e.create(e.scan(n,t,r))},null!=t&&(this.has=t.has,this.get=t.get,this.prev=t.prev,this.next=t.next)}return e.isList=function(e){return!!(null!=e&&e.has&&e.get&&e.prev&&e.next)},e.create=function(t){return new e({has:t.has,get:t.get,prev:t.prev,next:t.next})},e.first=function(e){return e.get(e.next())},e.last=function(e){return e.get(e.prev())},e.forEach=function(e,t){for(var n;null!=(n=e.next(n));)t(e.get(n),n)},e.reduce=function(e,t,n){for(var r;null!=(r=e.next(r));)n=t(n,e.get(r),r);return n},e.toArray=function(e){for(var t,n=0,r=[];null!=(t=e.next(t));)r[n++]=e.get(t);return r},e.findKey=function(e,t){for(var n;null!=(n=e.next(n));)if(t(e.get(n),n))return n},e.find=function(t,n){return t.get(e.findKey(t,n))},e.keyOf=function(t,n){return e.findKey(t,function(e){return e===n})},e.indexOf=function(e,t){for(var n,r=0;null!=(n=e.next(n));){if(e.get(n)===t)return r;r++}},e.keyAt=function(e,t){for(var n,r=0;null!=(n=e.next(n));)if(r++==t)return n;return null},e.at=function(t,n){return t.get(e.keyAt(t,n))},e.every=function(e,t){for(var n;null!=(n=e.next(n));)if(!t(e.get(n),n))return!1;return!0},e.some=function(e,t){for(var n;null!=(n=e.next(n));)if(t(e.get(n),n))return!0;return!1},e.contains=function(t,n){return e.some(t,function(e){return e===n})},e.reverse=function(e){function t(t){return e.next(t)}function n(t){return e.prev(t)}var r=e.has,i=e.get;return{has:r,get:i,prev:t,next:n}},e.map=function(e,t){function n(n){return r(n)?t(e.get(n),n):void 0}var r=e.has,i=e.prev,u=e.next;return{has:r,get:n,prev:i,next:u}},e.filter=function(e,t){function n(n){return e.has(n)&&t(e.get(n),n)}function r(t){return n(t)?e.get(t):void 0}function i(t){for(var r=t;null!=(r=e.prev(r));)if(n(r))return r;return null}function u(t){for(var r=t;null!=(r=e.next(r));)if(n(r))return r;return null}return{has:n,get:r,prev:i,next:u}},e.flatten=function(e){function t(t){var n=r.Path.create(t);return r.Tree.has(e,n,1)}function n(t){var n=r.Path.create(t);return r.Tree.get(e,n,1)}function i(t){var n=r.Path.create(t);return r.Path.key(r.Tree.prev(e,n,1))}function u(t){var n=r.Path.create(t);return r.Path.key(r.Tree.next(e,n,1))}return{has:t,get:n,prev:i,next:u}},e.flatMap=function(t,n){return e.flatten(e.map(t,n))},e.cache=function(e){return new i["default"](e)},e.index=function(e){return new u["default"](e)},e.keyBy=function(e,t){return new o["default"](e,t)},e.zip=function(t,n,r){function i(e){return t.has(e)&&n.has(e)}function u(e){return i(e)?r(t.get(e),n.get(e)):void 0}function o(e){var r=t.prev(e);return null!=r&&r==n.prev(e)?r:null}function s(e){var r=t.next(e);return null!=r&&r==n.next(e)?r:null}return t=e.index(t),n=e.index(n),{has:i,get:u,prev:o,next:s}},e.skip=function(t,n){return e.filter(e.index(t),function(e,t){return t>=n})},e.take=function(t,n){return e.filter(e.index(t),function(e,t){return n>t})},e.range=function(t,n,r){return e.filter(e.index(t),function(e,t){return t>=n&&r+n>t})},e.scan=function(t,n,r){function i(e){var i=u.prev(e);return n(null!=i?u.get(i):r,t.get(e))}var u,o=t.has,s=t.prev,a=t.next;return u=e.cache({has:o,get:i,prev:s,next:a})},e}();n.List=s,n["default"]=s},{"./cache":2,"./index":4,"./key_by":6,"./tree":15}],9:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./observable_list"),u=function(e){function t(n){var r=this;e.call(this,n),this.set=function(e,t){throw new Error("Not implemented")},this.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];throw new Error("Not implemented")},this.addBefore=function(e,n){return t.addBefore(r,e,n)},this.addAfter=function(e,n){return t.addAfter(r,e,n)},this.push=function(e){return t.push(r,e)},this.unshift=function(e){return t.unshift(r,e)},this["delete"]=function(e){return t["delete"](r,e)},this.deleteBefore=function(e){return t.deleteBefore(r,e)},this.deleteAfter=function(e){return t.deleteAfter(r,e)},this.pop=function(){return t.pop(r)},this.shift=function(){return t.shift(r)},this.remove=function(e){return t.remove(r,e)},null!=n&&(this.set=n.set,this.splice=n.splice)}return r(t,e),t.isMutableList=function(e){return i.ObservableList.isObservableList(e)&&!!e.set&&!!e.splice},t.create=function(e){return new t({has:e.has,get:e.get,prev:e.prev,next:e.next,observe:e.observe,set:e.set,splice:e.splice})},t.addBefore=function(e,t,n){return e.splice(e.prev(t),t,n),e.prev(t)},t.addAfter=function(e,t,n){return e.splice(t,e.next(t),n),e.next(t)},t.push=function(e,n){return t.addBefore(e,null,n)},t.unshift=function(e,n){return t.addAfter(e,null,n)},t["delete"]=function(e,t){if(e.has(t)){var n=e.get(t);return e.splice(e.prev(t),e.next(t)),n}},t.deleteBefore=function(e,n){return t["delete"](e,e.prev(n))},t.deleteAfter=function(e,n){return t["delete"](e,e.next(n))},t.pop=function(e){return t.deleteBefore(e,null)},t.shift=function(e){return t.deleteAfter(e,null)},t.remove=function(e,n){var r=t.keyOf(e,n);return null==r?!1:(delete r,!0)},t}(i.ObservableList);n.MutableList=u,n["default"]=u},{"./observable_list":14}],10:[function(e,t,n){var r=e("./key"),i=function(){function e(){var e=this;this.observe=function(t){var n=r["default"].create();return e._observers[n]=t,{unsubscribe:function(){delete e._observers[n]}}},this.notify=function(t){for(var n in e._observers)t(e._observers[n])},this._observers=Object.create(null)}return e}();n.Subject=i},{"./key":5}],11:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./cache"),u=function(e){function t(t){var n=this;e.call(this,t),this.observe=function(e){return n._list.observe(e)},this.onInvalidate=function(e,t){var r;for(r=e;void 0!==(r=n._next[r])&&(delete n._next[n._prev[r]],delete n._prev[r],r!=t);)delete n._byKey[r];for(;void 0!==(r=n._prev[r])&&(delete n._prev[n._next[r]],delete n._next[r],r!=e);)delete n._byKey[r]},t.observe(this)}return r(t,e),t}(i["default"]);n.ObservableCache=u,n["default"]=u},{"./cache":2}],12:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./index"),u=e("./observable"),o=function(e){function t(t){var n=this;e.call(this,t),this.has=function(e){if(e>=0&&e<n._byIndex.length)return!0;for(var t,r=n._byIndex.length-1;r!=e;){if(t=n._list.next(n._byIndex[r]),null==t)return!1;n._byIndex[++r]=t,n._byKey[t]=r}return!0},this.observe=function(e){return n._subject.observe(e)},this.onInvalidate=function(e,t){for(var r=n._byKey[e],i=n._byIndex.length,u=r;++u<i;)delete n._byKey[n._byIndex[u]];n._byIndex.splice(r+1),n._subject.notify(function(e){e.onInvalidate(r,null)})},this._byKey=Object.create(null),this._subject=new u.Subject,t.observe(this)}return r(t,e),t}(i["default"]);n.ObservableIndex=o,n["default"]=o},{"./index":4,"./observable":10}],13:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./key_by"),u=e("./observable"),o=function(e){function t(t,n){var r=this;e.call(this,t,n),this.observe=function(e){return r._subject.observe(e)},this.onInvalidate=function(e,t){r._subject.notify(function(n){n.onInvalidate(this._keyBySourceKey[e],this._keyBySourceKey[t])})},this._subject=new u.Subject,t.observe(this)}return r(t,e),t}(i["default"]);n.ObservableKeyBy=o,n["default"]=o},{"./key_by":6,"./observable":10}],14:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./list"),u=e("./tree"),o=e("./observable"),s=e("./observable_cache"),a=e("./observable_index"),l=e("./observable_key_by"),f=function(e){function t(n){var r=this;e.call(this,n),this.observe=function(e){throw new Error("Not implemented")},this.reverse=function(){return t.create(t.reverse(r))},this.map=function(e){return t.create(t.map(r,e))},this.filter=function(e){return t.create(t.filter(r,e))},this.flatten=function(){return t.create(t.flatten(r))},this.flatMap=function(e){return t.create(t.flatMap(r,e))},this.cache=function(){return t.create(t.cache(r))},this.index=function(){return t.create(t.index(r))},this.keyBy=function(e){return t.create(t.keyBy(r,e))},this.zip=function(e,n){return t.create(t.zip(r,e,n))},this.skip=function(e){return t.create(t.skip(r,e))},this.take=function(e){return t.create(t.take(r,e))},this.range=function(e,n){return t.create(t.range(r,e,n))},this.scan=function(e,n){return t.create(t.scan(r,e,n))},null!=n&&(this.observe=n.observe)}return r(t,e),t.isObservableList=function(e){return i.List.isList(e)&&!!e.observe},t.create=function(e){return new t({has:e.has,get:e.get,prev:e.prev,next:e.next,observe:e.observe})},t.reverse=function(e){function t(t){return e.observe({onInvalidate:function(e,n){t.onInvalidate(n,e)}})}var n=i.List.reverse(e),r=n.has,u=n.get,o=n.prev,s=n.next;return{has:r,get:u,prev:o,next:s,observe:t}},t.map=function(e,t){var n=i.List.map(e,t),r=n.has,u=n.get,o=n.prev,s=n.next;return{has:r,get:u,prev:o,next:s,observe:e.observe}},t.filter=function(e,t){function n(t){return e.observe({onInvalidate:function(e,n){e=u(e)?e:s(e),n=u(n)?n:a(n),t.onInvalidate(e,n)}})}var r=i.List.filter(e,t),u=r.has,o=r.get,s=r.prev,a=r.next;return{has:u,get:o,prev:s,next:a,observe:n}},t.flatten=function(e){var n,r=Object.create(null),s=new o.Subject;e.observe({onInvalidate:function(e,t){var i;for(i=e;null!=(i=n.next(i))&&i!=t;){var u=r[i];u&&(u.unsubscribe(),delete r[i])}for(i=t;null!=(i=n.prev(i))&&i!=e;){var u=r[i];u&&(u.unsubscribe(),delete r[i])}}}),n=t.cache(t.map(e,function(t,n){return r[n]=t.observe({onInvalidate:function(t,r){var i,o,a=u.Path.append(n,t),l=u.Path.append(n,r);null==t&&(a=u.Tree.prev(e,u.Tree.next(e,a))),null==r&&(l=u.Tree.next(e,u.Tree.prev(e,l))),i=u.Path.key(a),o=u.Path.key(l),s.notify(function(e){e.onInvalidate(i,o)})}}),t})),n.observe({onInvalidate:function(t,n){var r=u.Path.key(u.Tree.prev(e,[t])),i=u.Path.key(u.Tree.next(e,[n]));s.notify(function(e){e.onInvalidate(r,i)})}});var a=i.List.flatten(n),l=a.has,f=a.get,c=a.next,h=a.prev;return{has:l,get:f,next:c,prev:h,observe:s.observe}},t.flatMap=function(e,n){return t.flatten(t.map(e,n))},t.cache=function(e){return new s["default"](e)},t.index=function(e){return new a["default"](e)},t.keyBy=function(e,t){return new l["default"](e,t)},t.zip=function(e,n,r){function i(t){return e.has(t)&&n.has(t)}function u(t){return i(t)?r(e.get(t),n.get(t)):void 0}function s(t){var r=e.prev(t);return null!=r&&r==n.prev(t)?r:null}function a(t){var r=e.next(t);return null!=r&&r==n.next(t)?r:null}e=t.index(e),n=t.index(n);var l=new o.Subject,f={onInvalidate:function(e,t){l.notify(function(n){n.onInvalidate(e,t)})}};return e.observe(f),n.observe(f),{has:i,get:u,prev:s,next:a,observe:l.observe}},t.skip=function(e,n){return t.filter(t.index(e),function(e,t){return t>=n})},t.take=function(e,n){return t.filter(t.index(e),function(e,t){return n>t})},t.range=function(e,n,r){return t.filter(t.index(e),function(e,t){return t>=n&&r+n>t})},t.scan=function(e,n,r){function i(t){var i=o.prev(t);return n(null!=i?o.get(i):r,e.get(t))}function u(t){return e.observe({onInvalidate:function(e,n){t.onInvalidate(e,null)}})}var o,s=e.has,a=e.prev,l=e.next;return o=t.cache({has:s,get:i,prev:a,next:l,observe:u})},t}(i.List);n.ObservableList=f,n["default"]=f},{"./list":8,"./observable":10,"./observable_cache":11,"./observable_index":12,"./observable_key_by":13,"./tree":15}],15:[function(e,t,n){var r,i=e("./list");!function(e){function t(e){return JSON.stringify(e)}function n(e){return null==e?null:JSON.parse(e.toString())}function r(e){return e?e[0]:null}function i(e,t){return e[t]}function u(e){return null==e?[]:e.slice(1,e.length)}function o(e,t){return[].concat(e).concat(t)}e.key=t,e.create=n,e.head=r,e.get=i,e.tail=u,e.append=o}(r=n.Path||(n.Path={}));var u;!function(e){function t(t,n,i){void 0===i&&(i=1/0);var u=r.head(n),o=r.tail(n);return t.has(u)&&(0==o.length||0==i||e.has(t.get(u),o,i))}function n(t,n,i){void 0===i&&(i=1/0);var u=r.head(n),o=r.tail(n);if(t.has(u)){var s=t.get(u);return 0==o.length||0==i?s:e.get(s,o,i)}}function u(t,n,u){void 0===n&&(n=[]),void 0===u&&(u=1/0);var o,s=r.head(n),a=r.tail(n),l=s;if(null==s||t.has(s))do if(o=t.get(l),i.List.isList(o)&&0!=u){var f=e.prev(o,a,u-1);if(null!=f)return r.append(l,f);a=[]}else if(null!=l&&l!=s)return[l];while(null!=(l=t.prev(l)))}function o(t,n,u){void 0===n&&(n=[]),void 0===u&&(u=1/0);var o,s=r.head(n),a=r.tail(n),l=s;if(null==s||t.has(s))do if(o=t.get(l),i.List.isList(o)&&0!=u){var f=e.next(o,a,u-1);if(null!=f)return r.append(l,f);a=[]}else if(null!=l&&l!=s)return[l];while(null!=(l=t.next(l)))}e.has=t,e.get=n,e.prev=u,e.next=o}(u=n.Tree||(n.Tree={})),n["default"]=u},{"./list":8}],16:[function(e,t,n){var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},i=e("./key"),u=e("./observable"),o=e("./mutable_list"),s=function(e){function t(t){var n=this;e.call(this),this.has=function(e){return n._key==e},this.get=function(e){return n.has(e)?n._value:void 0},this.prev=function(e){return null==e?n._key:null},this.next=function(e){return null==e?n._key:null},this.set=function(e,t){n._key=e,n._value=t,n._invalidate()},this.splice=function(e,t){for(var r=[],u=2;u<arguments.length;u++)r[u-2]=arguments[u];return r.length?n.set(i["default"].create(),r[0]):(delete n._key,delete n._value,void n._invalidate())},this.observe=function(e){return n._subject.observe(e)},this._invalidate=function(e,t){n._subject.notify(function(n){n.onInvalidate(e,t)})},this._subject=new u.Subject,arguments.length&&this.splice(null,null,t)}return r(t,e),t}(o.MutableList);n["default"]=s},{"./key":5,"./mutable_list":9,"./observable":10}],17:[function(e,t,n){function r(e){return i["default"](e)}var r,i=e("./factory"),u=e("./list"),o=e("./observable_list"),s=e("./mutable_list"),a=e("./unit"),l=e("./array_list"),f=e("./linked_list"),c=e("./tree");!function(e){e.List=u["default"],e.ObservableList=o["default"],e.MutableList=s["default"],e.Unit=a["default"],e.ArrayList=l["default"],e.LinkedList=f["default"],e.Tree=c["default"]}(r||(r={})),t.exports=r},{"./array_list":1,"./factory":3,"./linked_list":7,"./list":8,"./mutable_list":9,"./observable_list":14,"./tree":15,"./unit":16}]},{},[17])(17)});