!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.Sonic=t()}}(function(){return function t(n,e,r){function i(o,s){if(!e[o]){if(!n[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(u)return u(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var f=e[o]={exports:{}};n[o][0].call(f.exports,function(t){var e=n[o][1][t];return i(e?e:t)},f,f.exports,t,n,e,r)}return e[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,n,e){var r=this.__extends||function(t,n){function e(){this.constructor=t}for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);e.prototype=n.prototype,t.prototype=new e},i=t("./mutable_list"),u=function(t){function n(n){var e=this;void 0===n&&(n=[]),t.call(this),this.has=function(t){return t>-1&&t<e._array.length},this.get=function(t){return e.has(t)?e._array[t]:void 0},this.prev=function(t){return null==t&&e._array.length?e._array.length-1:e._array.length>0&&null!=t&&e.has(t)&&e.has(t-1)?t-1:null},this.next=function(t){return null==t&&e._array.length?0:e._array.length>0&&null!=t&&e.has(t)&&e.has(t+1)?t+1:null},this.set=function(t,n){return e.has(t)?void(e._array[t]=n):!1},this.splice=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(null==t)t=-1;else if(!e.has(t))return!1;if(null==n)n=e._array.length;else if(!e.has(n))return!1;return(u=e._array).splice.apply(u,[t+1,n-t-1].concat(r)),e._invalidate(t,null),!0;var u},this._array=n}return r(n,t),n}(i["default"]);e.ArrayList=u,e["default"]=u},{"./mutable_list":6}],2:[function(t,n,e){function r(t,n){return function(e){return t(n(e))}}e.compose=r,e["default"]=r},{}],3:[function(t,n,e){function r(t){return o.MutableList.isMutableList(t)?o.MutableList.create(t):u.ObservableList.isObservableList(t)?u.ObservableList.create(t):i.List.isList(t)?i.List.create(t):Array.isArray(t)?new l["default"](t):s["default"].create(t)}var i=t("./list"),u=t("./observable_list"),o=t("./mutable_list"),s=t("./unit"),l=t("./array_list");e["default"]=r},{"./array_list":1,"./list":5,"./mutable_list":6,"./observable_list":7,"./unit":9}],4:[function(t,n,e){var r=this.__extends||function(t,n){function e(){this.constructor=t}for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);e.prototype=n.prototype,t.prototype=new e},i=t("./unique_id"),u=t("./mutable_list"),o=function(t){function n(n){var e=this;t.call(this),this.has=function(t){return t in e._byId},this.get=function(t){return e._byId[t]},this.prev=function(t){return void 0===t&&(t=-1),e._prev[t]},this.next=function(t){return void 0===t&&(t=-1),e._next[t]},this.set=function(t,n){return e.has(t)?(e._byId[t]=n,e._invalidate(e._prev[t],e._next[t]),!0):!1},this.splice=function(t,n){void 0===t&&(t=-1),void 0===n&&(n=-1);for(var r=[],u=2;u<arguments.length;u++)r[u-2]=arguments[u];for(var o,s,l,a;(o=e._next[o||t])&&(delete e._next[e._prev[o]],delete e._next[s],o!=n);)delete e._byId[o];for(;(s=e._prev[s||n])&&(delete e._prev[e._next[s]],delete e._prev[s],s!=t);)delete e._byId[o];for(var f=0;f<r.length;f++)l=r[f],a=i["default"](),e._byId[a]=l,e._prev[a]=t,e._next[t]=a,t=a;return e._prev[n]=t,e._next[t]=n,e._invalidate(t,n),!0},this._byId=Object.create(null),this._prev=Object.create(null),this._next=Object.create(null),this._prev[-1]=-1,this._next[-1]=-1,this.splice.apply(this,[null,null].concat(n))}return r(n,t),n}(u["default"]);e["default"]=o},{"./mutable_list":6,"./unique_id":8}],5:[function(t,n,e){var r=function(){function t(){var n=this;this.forEach=function(e){return t.forEach(n,e)},this.reduce=function(e,r){return t.reduce(n,e)},this.toArray=function(){return t.toArray(n)},this.findId=function(e){return t.findId(n,e)},this.find=function(e){return t.find(n,e)},this.idOf=function(e){return t.idOf(n,e)},this.indexOf=function(e){return t.indexOf(n,e)},this.idAt=function(e){return t.idAt(n,e)},this.at=function(e){return t.at(n,e)},this.every=function(e){return t.every(n,e)},this.some=function(e){return t.some(n,e)},this.contains=function(e){return t.contains(n,e)},this.first=function(){return t.first(n)},this.last=function(){return t.last(n)},this.reverse=function(){return t.reverse(n)},this.map=function(e){return t.map(n,e)},this.filter=function(e){return t.filter(n,e)},this.flatten=function(){return t.flatten(n)},this.flatMap=function(e){return t.flatMap(n,e)}}return t.isList=function(t){return!!(t.has&&t.get&&t.prev&&t.next)},t.create=function(n){var e={has:n.has,get:n.get,prev:n.prev,next:n.next};return t.call(e),e},t.forEach=function(t,n){for(var e;null!=(e=t.next(e));)n(t.get(e),e)},t.reduce=function(t,n,e){for(var r;null!=(r=t.next(r));)e=n(e,t.get(r),r);return e},t.toArray=function(n){return t.reduce(n,function(t,n){return t.push(n),t},[])},t.findId=function(t,n){for(var e;null!=(e=t.next(e));)if(n(t.get(e),e))return e},t.find=function(n,e){return n.get(t.findId(n,e))},t.idOf=function(n,e){return t.findId(n,function(t){return t===e})},t.indexOf=function(t,n){for(var e,r=0;null!=(e=t.next(e));){if(t.get(e)===n)return r;r++}},t.idAt=function(t,n){for(var e,r=0;null!=(e=t.next(e));)if(r++==n)return e;return null},t.at=function(n,e){return n.get(t.idAt(n,e))},t.every=function(t,n){for(var e;null!=(e=t.next(e));)if(!n(t.get(e),e))return!1;return!0},t.some=function(t,n){for(var e;null!=(e=t.next(e));)if(n(t.get(e),e))return!0;return!1},t.contains=function(n,e){return t.some(n,function(t){return t===e})},t.first=function(t){return t.get(t.next())},t.last=function(t){return t.get(t.prev())},t.reverse=function(n){function e(t){return n.has(t)}function r(t){return n.get(t)}function i(t){return n.next(t)}function u(t){return n.prev(t)}return t.create({has:e,get:r,prev:i,next:u})},t.map=function(n,e){function r(t){return e(n.get(t))}var i=n.has,u=n.prev,o=n.next;return t.create({has:i,get:r,prev:u,next:o})},t.filter=function(n,e){function r(t){return n.has(t)&&e(n.get(t))}function i(t){return r(t)?n.get(t):void 0}function u(t){for(var e=t;null!=(e=n.prev(e));)if(r(e))return e;return null}function o(t){for(var e=t;null!=(e=n.next(e));)if(r(e))return e;return null}return t.create({has:r,get:i,prev:u,next:o})},t.flatten=function(n){function e(t){return n.has(t[0])?n.get(t[0]).has(t[1]):!1}function r(t){return n.has(t[0])?n.get(t[0]).get(t[1]):void 0}function i(e){if(null==e)return[].concat(n.prev()).concat(t.last(n).prev());var r,i=e[0];if(n.has(i)){if(r=n.get(i).prev(e[1]),null!=r)return[i,r];for(;null!=(i=n.prev(i));)if(null!=(r=n.get(i).prev()))return[i,r]}return null}function u(e){if(null==e)return[].concat(n.next()).concat(t.first(n).next());var r,i=e[0];if(n.has(i)){if(null!=(r=n.get(i).next(e[1])))return[i,r];for(;null!=(i=n.next(i));)if(null!=(r=n.get(i).next()))return[i,r]}return null}return t.create({has:e,get:r,prev:i,next:u})},t.flatMap=function(n,e){return t.flatten(t.map(n,e))},t.cache=function(n){function e(t){return null==t?null:t.toString()in o||n.has(t)}function r(t){if(!e(t))return null;var r=t.toString(),i=o[r];return null==i&&(i=o[r]=n.get(t)),i}function i(t){if(e(t)){var r=t.toString(),i=l[r];null==i&&(i=l[r]=n.prev(t))}else i=n.prev();return i}function u(t){if(e(t)){var r=t.toString(),i=s[r];null==i&&(i=s[r]=n.next(t))}else i=n.next();return i}var o=Object.create(null),s=Object.create(null),l=Object.create(null);return t.create({has:e,get:r,prev:i,next:u})},t}();e.List=r,e["default"]=r},{}],6:[function(t,n,e){var r=this.__extends||function(t,n){function e(){this.constructor=t}for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);e.prototype=n.prototype,t.prototype=new e},i=t("./observable_list"),u=function(t){function n(){var e=this;t.call(this),this.push=function(t){return n.push(e,t)},this.unshift=function(t){return n.unshift(e,t)},this.pop=function(){return n.pop(e)},this.shift=function(){return n.shift(e)},this["delete"]=function(t){return n["delete"](e,t)},this.remove=function(t){return n.remove(e,t)}}return r(n,t),n.isMutableList=function(t){return i.ObservableList.isObservableList(t)&&!!t.set&&!!t.splice},n.create=function(t){({has:t.has,get:t.get,prev:t.prev,next:t.next,observe:t.observe,set:t.set,splice:t.splice});return n.call(t)},n.push=function(t,n){return t.splice(t.prev(),null,n),t.prev()},n.unshift=function(t,n){return t.splice(t.next(),null,n),t.next()},n.pop=function(t){var n=t.get(t.prev());return t.splice(t.prev(t.prev()),null),n},n.shift=function(t){var n=t.get(t.next());return t.splice(t.next(t.next()),null),n},n["delete"]=function(t,n){return t.has(n)?t.splice(t.prev(n),t.next(n)):!1},n.remove=function(t,e){var r=n.idOf(t,e);return delete r},n}(i.ObservableList);e.MutableList=u,Object.keys(u).forEach(function(t){u.prototype[t]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e-0]=arguments[e];u[t].apply(u,[this].concat(n))}}),e["default"]=u},{"./observable_list":7}],7:[function(t,n,e){var r=this.__extends||function(t,n){function e(){this.constructor=t}for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);e.prototype=n.prototype,t.prototype=new e},i=t("./compose"),u=t("./unique_id"),o=t("./list"),s=function(t){function n(){var n=this;t.call(this),this.observe=function(t){var e=u["default"](),r=n._observers;return r[e]=t,{unsubscribe:function(){delete r[e]}}},this._invalidate=function(t,e){n.has(t)||(t=null),n.has(e)||(e=null),n._notify(function(n){n.onInvalidate(t,e)})},this._observers=Object.create(null)}return r(n,t),n.isObservableList=function(t){return o.List.isList(t)&&!!t.observe},n.prototype._notify=function(t){for(var n in this._observers)t(this._observers[n])},n.create=function(t){var e={has:t.has,get:t.get,prev:t.prev,next:t.next,observe:t.observe};return n.call(e)},n.reverse=function(t){function e(n){return t.observe(n)}var r=o.List.reverse(t),i=r.has,u=r.get,s=r.prev,l=r.next;return n.create({has:i,get:u,prev:s,next:l,observe:e})},n.map=function(t,e){var r=t.has,u=t.prev,o=t.next,s=t.observe;return n.create({has:r,get:i["default"](e,t.get),prev:u,next:o,observe:s})},n.filter=function(t,e){function r(n){return t.observe({onInvalidate:function(t,e){t=u(t)?t:l(t),e=u(e)?e:a(e),n.onInvalidate(t,e)}})}var i=o.List.filter(t,e),u=i.has,s=i.get,l=i.prev,a=i.next;return n.create({has:u,get:s,prev:l,next:a,observe:r})},n}(o.List);e.ObservableList=s},{"./compose":2,"./list":5,"./unique_id":8}],8:[function(t,n,e){function r(){return++i}var i=0;e.uniqueId=r,e["default"]=r},{}],9:[function(t,n,e){var r=this.__extends||function(t,n){function e(){this.constructor=t}for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);e.prototype=n.prototype,t.prototype=new e},i=t("./unique_id"),u=t("./mutable_list"),o=function(t){function n(n){var e=this;t.call(this),this.has=function(t){return e._id==t},this.get=function(t){return e.has(t)?e._value:void 0},this.prev=function(t){return null==t?e._id:null},this.next=function(t){return null==t?e._id:null},this.set=function(t,n){return e._id=t,e._value=n,!0},this.splice=function(t,n){for(var r=[],u=2;u<arguments.length;u++)r[u-2]=arguments[u];return r.length?e.set(i["default"](),r[0]):(delete e._id,delete e._value,!0)},arguments.length>2&&this.splice(null,null,n)}return r(n,t),n}(u["default"]);e["default"]=o},{"./mutable_list":6,"./unique_id":8}],10:[function(t,n,e){function r(t){return i["default"](t)}var i=t("./factory"),u=t("./list"),o=t("./mutable_list"),s=t("./unit"),l=t("./array_list"),a=t("./linked_list");r.List=u["default"],r.MutableList=o["default"],r.Unit=s["default"],r.ArrayList=l["default"],r.LinkedList=a["default"],n.exports=r},{"./array_list":1,"./factory":3,"./linked_list":4,"./list":5,"./mutable_list":6,"./unit":9}]},{},[10])(10)});